<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Task 2</title>
	<meta charset="utf-8" />
</head>
<body>
    <script>

        window.onload = function () {

            var button = document.getElementById('btn');

            button.onclick = function () {
                getContent('get', '1.html');
                getContent('get', '2.html');
            }
            function getContent(method, url, async) {
                var xhr = new XMLHttpRequest();
                xhr.open(method, url, true);

                xhr.onreadystatechange = function () {
                    if (xhr.readyState == 4) {
                        if (xhr.status == 200) {
                            var div = document.body.appendChild(document.createElement('div'));
                            div.innerHTML = splitContent(xhr.responseText);
                        }
                    }
                }
                xhr.send();
            }
            function splitContent(str) {
                var openTag = "<body>";
                var closeTag = "</body>";
                var startPos = str.indexOf(openTag);
                var endPos = str.indexOf(closeTag);
                return str.slice(startPos + openTag.length, endPos).trim();
            }
        

        xhr.timeout = 20000;

        xhr.ontimeout = function () {
            xhr.abort();
            alert('Превышен интервал ожидания');

        }
        }
    </script>
</body>
</html>
